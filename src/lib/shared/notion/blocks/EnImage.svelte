<script lang="ts">
	import { Image } from '@unpic/svelte';

	import type { ImageBlockObjectResponse } from '@notionhq/client/build/src/api-endpoints';

	export let block: ImageBlockObjectResponse;
</script>

{#if block.image}
	{#if block.image.type === 'file'}
		<Image
			src={block.image.file.url}
			layout="fullWidth"
			aspectRatio={16 / 9}
			class="aspect-video rounded-md object-cover"
		/>
		{#if block.image.caption?.length > 0}
			<p class="w-full text-center text-xs text-gray-400">{block.image.caption?.[0].plain_text}</p>
		{/if}
	{:else if block.image.type === 'external'}
		<Image
			src={block.image.external.url}
			layout="fullWidth"
			aspectRatio={16 / 9}
			class="aspect-video rounded-md object-cover"
		/>
		{#if block.image.caption?.length > 0}
			<p class="w-full text-center text-xs text-gray-400">{block.image.caption?.[0].plain_text}</p>
		{/if}
	{/if}
{/if}

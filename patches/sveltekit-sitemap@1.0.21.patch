diff --git a/dist/index.js b/dist/index.js
index 35cbc0c8b649397eec5db580be3c26d2b4612a67..200bd0ac4767cc4c76ef4f3b139be77017f860b5 100644
--- a/dist/index.js
+++ b/dist/index.js
@@ -1,4 +1,4 @@
-"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunk4DJVROEEjs = require('./chunk-4DJVROEE.js');function d(r,i){let t=new Headers(i==null?void 0:i.headers);return t.has("content-type")||t.set("content-type","application/json"),new Response(JSON.stringify(r),_chunk4DJVROEEjs.b.call(void 0, _chunk4DJVROEEjs.a.call(void 0, {},i),{headers:t}))}var c=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),y= exports.generateSitemap =(r,i,t,l)=>{let a=Object.keys(t).reduce((s,e)=>(!e.includes("[")&&r[e]!==!1&&Object.assign(s,{[e]:{path:e,priority:e==="/"?"1.0":"0.7"}}),s),{});return Object.entries(t).forEach(([s])=>{let e=r[s];e&&(Array.isArray(e)?e.forEach(o=>{o&&Object.assign(a,{[o.path]:o})}):Object.assign(a,{[(e==null?void 0:e.path)||s]:e}))}),l===!0?Object.entries(a):`<?xml version="1.0" encoding="UTF-8"?>
+"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunk4DJVROEEjs = require('./chunk-4DJVROEE.js');function $(n,s){let t=JSON.stringify(n),a=new Headers(s==null?void 0:s.headers);return a.has("content-length")||a.set("content-length",R.encode(t).byteLength.toString()),a.has("content-type")||a.set("content-type","application/json"),new Response(t,_chunk4DJVROEEjs.b.call(void 0, _chunk4DJVROEEjs.a.call(void 0, {},s),{headers:a}))}var R=new TextEncoder;var h=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),y= exports.generateSitemap =(n,s,t,a)=>{let c=["","zh-HK"],o=Object.keys(t).reduce((r,e)=>(!e.replace("[[lang]]","").includes("[")&&n[e]!==!1&&c.forEach(p=>{let m=e.replace("/[[lang]]",p?`/${p}`:"");Object.assign(r,{[m]:{path:m,priority:e==="/"?"1.0":"0.7"}})}),r),{});return Object.entries(t).forEach(([r])=>{let e=n[r];e&&(Array.isArray(e)?e.forEach(i=>{i&&c.forEach(l=>{let p=_chunk4DJVROEEjs.b.call(void 0, _chunk4DJVROEEjs.a.call(void 0, {},i),{path:(l?`/${l}`:"")+i.path});Object.assign(o,{[(l?`/${l}`:"")+p.path]:p})})}):Object.assign(o,{[(e==null?void 0:e.path)||r]:e}))}),a===!0?Object.entries(o):`<?xml version="1.0" encoding="UTF-8"?>
 <urlset
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
@@ -9,29 +9,28 @@ xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"
 xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"
 xmlns:pagemap="http://www.google.com/schemas/sitemap-pagemap/1.0"
 xmlns:xhtml="http://www.w3.org/1999/xhtml">
-${Object.entries(a).map(([s,e])=>{var h,f;if(!e)return"";let{path:o,priority:n,changeFreq:g,image:m,lastMod:w}=e;return`  <url>
-    <loc>${i}${o||s}</loc>
-  </url>
-  ${w?`<lastmod>${w}</lastmod>`:""}
-  ${n?`<priority>${n}</priority>`:""}
-  ${g?`<changefreq>${g}</changefreq>`:""}
+${Object.entries(o).map(([r,e])=>{var w,d;if(!e)return"";let{path:i,priority:l,changeFreq:p,image:m,lastMod:f}=e;return`  <url>
+    <loc>${s}${i||r}</loc>
+  ${f?`<lastmod>${f}</lastmod>`:""}
+  ${l?`<priority>${l}</priority>`:""}
+  ${p?`<changefreq>${p}</changefreq>`:""}
   ${m?`
     <image:image>
-      <image:loc>${c(m.url)}</image:loc>
-      <image:title>${c((h=m.title)!=null?h:" ")}</image:title>
-      <image:caption>${c((f=m.altText)!=null?f:" ")}</image:caption>
-    </image:image>`:""}`}).join(`
+      <image:loc>${h(m.url)}</image:loc>
+      <image:title>${h((w=m.title)!=null?w:" ")}</image:title>
+      <image:caption>${h((d=m.altText)!=null?d:" ")}</image:caption>
+    </image:image>`:""}</url>`}).join(`
 `)}
-</urlset>`},S= exports.generateRobots =(r,i)=>{let t=[],l=a=>{let s=Object.entries(a.paths).reduce((e,[o,n])=>(n?e.allow.push(o):e.disallow.push(o),e),{allow:[],disallow:[]});Array.isArray(a.userAgent)?a.userAgent.forEach(e=>{t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:e,crawlDelay:a.crawlDelay},s))}):t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:a.userAgent||"*",crawlDelay:a.crawlDelay},s))};return typeof r=="boolean"?t.push({agent:"*",allow:r===!0?["/"]:[],disallow:r===!1?["/"]:[]}):Array.isArray(r)?r.forEach(l):l(r),`${t.map(({agent:a,crawlDelay:s,allow:e,disallow:o})=>`User-agent: ${a}
-Sitemap: ${i}/sitemap.xml
-${s?`Crawl-delay: ${s}`:""}
-${e.map(n=>`Allow: ${n}`).join(`
+</urlset>`},S= exports.generateRobots =(n,s)=>{let t=[],a=c=>{let o=Object.entries(c.paths).reduce((r,[e,i])=>(i?r.allow.push(e):r.disallow.push(e),r),{allow:[],disallow:[]});Array.isArray(c.userAgent)?c.userAgent.forEach(r=>{t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:r,crawlDelay:c.crawlDelay},o))}):t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:c.userAgent||"*",crawlDelay:c.crawlDelay},o))};return typeof n=="boolean"?t.push({agent:"*",allow:n===!0?["/"]:[],disallow:n===!1?["/"]:[]}):Array.isArray(n)?n.forEach(a):a(n),`${t.map(({agent:c,crawlDelay:o,allow:r,disallow:e})=>`User-agent: ${c}
+Sitemap: ${s}/sitemap.xml
+${o?`Crawl-delay: ${o}`:""}
+${r.map(i=>`Allow: ${i}`).join(`
 `)}
-${o.map(n=>`Disallow: ${n}`).join(`
+${e.map(i=>`Disallow: ${i}`).join(`
 `)}
 `.replace(/\n\n/g,`
 `).replace(/\n\n/g,`
 `)).join(`
 `)}
-`.trim()};var v=(r,i={})=>a=>_chunk4DJVROEEjs.c.call(void 0, void 0,[a],function*({event:t,resolve:l}){if(t.url.pathname==="/sitemap.xml"){let s=i.getRoutes?yield i.getRoutes(t):{},e=t.url.searchParams.get("format")==="json",o=y(s,t.url.origin,r,e);return e?d(o):new Response(o,{status:200,headers:{"Content-Type":"application/xml"}})}if(t.url.pathname==="/robots.txt"){let s=i.getRobots?yield i.getRobots(t):!0;return new Response(S(s,t.url.origin),{headers:{"content-type":"text/plain","cache-control":`max-age=${60*60*24}`}})}return l(t)});exports.encodeXML = c; exports.generateRobots = S; exports.generateSitemap = y; exports.sitemapHook = v;
+`.trim()};var V=(n,s={})=>c=>_chunk4DJVROEEjs.c.call(void 0, void 0,[c],function*({event:t,resolve:a}){if(t.url.pathname==="/sitemap.xml"){let o=s.getRoutes?yield s.getRoutes(t):{},r=t.url.searchParams.get("format")==="json",e=y(o,t.url.origin,n,r);return r?$(e):new Response(e,{status:200,headers:{"Content-Type":"application/xml"}})}if(t.url.pathname==="/robots.txt"){let o=s.getRobots?yield s.getRobots(t):!0;return new Response(S(o,t.url.origin),{headers:{"content-type":"text/plain","cache-control":`max-age=${60*60*24}`}})}return a(t)});exports.encodeXML = h; exports.generateRobots = S; exports.generateSitemap = y; exports.sitemapHook = V;
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/index.js.map b/dist/index.js.map
index 0b0e05c328d6780c237382445e57353d91983d6b..c52829082b9485b9a15817f0c8ff96a62b4011d9 100644
--- a/dist/index.js.map
+++ b/dist/index.js.map
@@ -1 +1 @@
-{"version":3,"sources":["../../node_modules/.pnpm/@sveltejs+kit@1.0.1_svelte@3.55.0+vite@4.0.3/node_modules/@sveltejs/kit/src/exports/index.js","../src/utils.ts","../src/hook.ts"],"names":["json","data","init","headers","__spreadProps","__spreadValues","encodeXML","str","generateSitemap","definitions","baseUrl","sitemap","toJson","routes","acc","route","RouteDefinition","definition","r","d","_a","_b","path","priority","changeFreq","image","lastMod","generateRobots","robots","agentsToRender","parseAgent","agent","infos","allow","a","crawlDelay","disallow","sitemapHook","params","_0","__async","event","resolve","routeDefinitions","generatedSitemap"],"mappings":"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","sourcesContent":["import { HttpError, Redirect, ActionFailure } from '../runtime/control.js';\nimport { BROWSER, DEV } from 'esm-env';\n\n// For some reason we need to type the params as well here,\n// JSdoc doesn't seem to like @type with function overloads\n/**\n * @type {import('@sveltejs/kit').error}\n * @param {number} status\n * @param {any} message\n */\nexport function error(status, message) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 400 || status > 599)) {\n\t\tthrow new Error(`HTTP error status codes must be between 400 and 599 — ${status} is invalid`);\n\t}\n\n\treturn new HttpError(status, message);\n}\n\n/** @type {import('@sveltejs/kit').redirect} */\nexport function redirect(status, location) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 300 || status > 308)) {\n\t\tthrow new Error('Invalid status code');\n\t}\n\n\treturn new Redirect(status, location);\n}\n\n/** @type {import('@sveltejs/kit').json} */\nexport function json(data, init) {\n\t// TODO deprecate this in favour of `Response.json` when it's\n\t// more widely supported\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-type')) {\n\t\theaders.set('content-type', 'application/json');\n\t}\n\n\treturn new Response(JSON.stringify(data), {\n\t\t...init,\n\t\theaders\n\t});\n}\n\n/**\n * Generates an `ActionFailure` object.\n * @param {number} status\n * @param {Record<string, any> | undefined} [data]\n */\nexport function fail(status, data) {\n\treturn new ActionFailure(status, data);\n}\n\n// TODO remove for 1.0\nexport function invalid() {\n\tthrow new Error('invalid(...) is now fail(...)');\n}\n","import { RO_Sitemap, RouteDefinitions, RouteDefinition, Sitemap, UserAgentDirective } from \"./types\";\n\nexport const encodeXML = (str: string) => {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&apos;\");\n};\n\nexport const generateSitemap = <S extends RO_Sitemap, J extends boolean>(\n  definitions: RouteDefinitions<S>,\n  baseUrl: string,\n  sitemap: S,\n  toJson?: J\n): object[] | string => {\n  // Instantiate a routes object with all the static routes\n  // The will be override if you pass custom settings\n  const routes: Record<string, RouteDefinition<boolean>> = Object.keys(sitemap).reduce((acc, route) => {\n    const isDynamic = route.includes(\"[\");\n    if (!isDynamic && definitions[route as keyof typeof definitions] !== false) {\n      Object.assign(acc, {\n        [route]: { path: route, priority: route === \"/\" ? \"1.0\" : \"0.7\" } as RouteDefinition<boolean>\n      });\n    }\n    return acc;\n  }, {});\n\n  // Add custom route data to the routes object\n  Object.entries(sitemap).forEach(([route]) => {\n    const RouteDefinition = definitions[route as keyof typeof definitions];\n    if (RouteDefinition) {\n      if (Array.isArray(RouteDefinition)) {\n        RouteDefinition.forEach((definition) => {\n          if (definition) {\n            Object.assign(routes, { [definition.path]: definition });\n          }\n        });\n      } else {\n        Object.assign(routes, { [RouteDefinition?.path || route]: RouteDefinition });\n      }\n    }\n  });\n\n  if (toJson === true) {\n    return Object.entries(routes) as object[];\n  }\n  // Build and return sitemap\n  // refs : https://github.com/sveltejs/kit/issues/1142#issuecomment-1032407693 https://github.com/Shopify/hydrogen/blob/1de3864214d04d9214e323d7f0a953c7b9309b7b/templates/demo-store/src/routes/sitemap.xml.server.ts\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"\nxmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\nxmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\nxmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"\nxmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\"\nxmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\"\nxmlns:pagemap=\"http://www.google.com/schemas/sitemap-pagemap/1.0\"\nxmlns:xhtml=\"http://www.w3.org/1999/xhtml\">\n${Object.entries(routes)\n\n  .map(([r, d]) => {\n    if (!d) return \"\";\n    const { path, priority, changeFreq, image, lastMod } = d;\n    return `  <url>\n    <loc>${baseUrl}${path || r}</loc>\n  </url>\n  ${lastMod ? `<lastmod>${lastMod}</lastmod>` : \"\"}\n  ${priority ? `<priority>${priority}</priority>` : \"\"}\n  ${changeFreq ? `<changefreq>${changeFreq}</changefreq>` : \"\"}\n  ${\n    image\n      ? `\n    <image:image>\n      <image:loc>${encodeXML(image.url)}</image:loc>\n      <image:title>${encodeXML(image.title ?? \" \")}</image:title>\n      <image:caption>${encodeXML(image.altText ?? \" \")}</image:caption>\n    </image:image>`\n      : \"\"\n  }`;\n  })\n  .join(\"\\n\")}\n</urlset>`;\n};\n\nexport const generateRobots = <S extends RO_Sitemap>(\n  robots: boolean | UserAgentDirective<S> | UserAgentDirective<S>[],\n  baseUrl: string\n) => {\n  // Instantiate the agents to render array\n  const agentsToRender: { agent: string; crawlDelay?: number; allow: string[]; disallow: string[] }[] = [];\n\n  const parseAgent = (agent: UserAgentDirective<S>) => {\n    const infos = Object.entries(agent.paths).reduce<{ allow: string[]; disallow: string[] }>(\n      (acc, [route, allow]) => {\n        if (allow) {\n          acc.allow.push(route);\n        } else {\n          acc.disallow.push(route);\n        }\n        return acc;\n      },\n      { allow: [], disallow: [] }\n    );\n\n    // Use the same config for all the user agents\n    if (Array.isArray(agent.userAgent)) {\n      agent.userAgent.forEach((a) => {\n        agentsToRender.push({\n          agent: a,\n          crawlDelay: agent.crawlDelay,\n          ...infos\n        });\n      });\n    } else {\n      agentsToRender.push({\n        agent: agent.userAgent || \"*\",\n        crawlDelay: agent.crawlDelay,\n        ...infos\n      });\n    }\n  };\n\n  // Build a default robot.txt for all user-agents\n  if (typeof robots === \"boolean\") {\n    agentsToRender.push({\n      agent: \"*\",\n      allow: robots === true ? [\"/\"] : [],\n      disallow: robots === false ? [\"/\"] : []\n    });\n  } else if (!Array.isArray(robots)) {\n    parseAgent(robots);\n  } else {\n    robots.forEach(parseAgent);\n  }\n\n  return `${agentsToRender\n    .map(({ agent, crawlDelay, allow, disallow }) =>\n      `User-agent: ${agent}\nSitemap: ${baseUrl}/sitemap.xml\n${crawlDelay ? `Crawl-delay: ${crawlDelay}` : \"\"}\n${allow.map((route) => `Allow: ${route}`).join(\"\\n\")}\n${disallow.map((route) => `Disallow: ${route}`).join(\"\\n\")}\n`\n        // Make it pretty\n        .replace(/\\n\\n/g, \"\\n\")\n        .replace(/\\n\\n/g, \"\\n\")\n    )\n    .join(\"\\n\")}\n`.trim();\n};\n","import { Handle, json } from \"@sveltejs/kit\";\nimport type { SitemapParams, RO_Sitemap } from \"./types\";\nimport { generateRobots, generateSitemap } from \"./utils\";\n\nexport const sitemapHook =\n  <S extends RO_Sitemap>(sitemap: S, params: SitemapParams<S> | undefined = {}): Handle =>\n  async ({ event, resolve }) => {\n    if (event.url.pathname === \"/sitemap.xml\") {\n      // Get dynamic custom definition for app routes\n      const routeDefinitions = params.getRoutes ? await params.getRoutes(event) : {};\n      const toJson = event.url.searchParams.get(\"format\") === \"json\";\n      const generatedSitemap = generateSitemap(routeDefinitions, event.url.origin, sitemap, toJson);\n      if (toJson) {\n        return json(generatedSitemap);\n      }\n      return new Response(generatedSitemap as string, {\n        status: 200,\n        headers: {\n          \"Content-Type\": \"application/xml\"\n        }\n      });\n    }\n\n    if (event.url.pathname === \"/robots.txt\") {\n      // Get dynamic robots directives\n      const robots = params.getRobots ? await params.getRobots(event) : true;\n\n      // Build and return the robots.txt\n      return new Response(generateRobots<S>(robots, event.url.origin), {\n        headers: {\n          \"content-type\": \"text/plain\",\n          // Cache it for 24 hours\n          \"cache-control\": `max-age=${60 * 60 * 24}`\n        }\n      });\n    }\n\n    return resolve(event);\n  };\n"]}
\ No newline at end of file
+{"version":3,"sources":["../node_modules/.pnpm/@sveltejs+kit@1.27.6_svelte@3.59.2_vite@4.5.0/node_modules/@sveltejs/kit/src/exports/index.js","../src/utils.ts","../src/hook.ts"],"names":["json","data","init","body","headers","encoder","__spreadProps","__spreadValues","encodeXML","str","generateSitemap","definitions","baseUrl","sitemap","toJson","langs","routes","acc","route","lang","langedRoute","RouteDefinition","definition","def","d","_a","_b","path","priority","changeFreq","image","lastMod","generateRobots","robots","agentsToRender","parseAgent","agent","infos","allow","a","crawlDelay","disallow","sitemapHook","params","_0","__async","event","resolve","routeDefinitions","generatedSitemap"],"mappings":"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","sourcesContent":["import { HttpError, Redirect, ActionFailure } from '../runtime/control.js';\nimport { BROWSER, DEV } from 'esm-env';\nimport { get_route_segments } from '../utils/routing.js';\n\nexport { VERSION } from '../version.js';\n\n/**\n * @overload\n * @param {number} status\n * @param {App.Error} body\n * @return {HttpError}\n */\n\n/**\n * @overload\n * @param {number} status\n * @param {{ message: string } extends App.Error ? App.Error | string | undefined : never} [body]\n * @return {HttpError}\n */\n\n/**\n * Creates an `HttpError` object with an HTTP status code and an optional message.\n * This object, if thrown during request handling, will cause SvelteKit to\n * return an error response without invoking `handleError`.\n * Make sure you're not catching the thrown error, which would prevent SvelteKit from handling it.\n * @param {number} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses). Must be in the range 400-599.\n * @param {{ message: string } extends App.Error ? App.Error | string | undefined : never} body An object that conforms to the App.Error type. If a string is passed, it will be used as the message property.\n */\nexport function error(status, body) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 400 || status > 599)) {\n\t\tthrow new Error(`HTTP error status codes must be between 400 and 599 — ${status} is invalid`);\n\t}\n\n\treturn new HttpError(status, body);\n}\n\n/**\n * Create a `Redirect` object. If thrown during request handling, SvelteKit will return a redirect response.\n * Make sure you're not catching the thrown redirect, which would prevent SvelteKit from handling it.\n * @param {300 | 301 | 302 | 303 | 304 | 305 | 306 | 307 | 308} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages). Must be in the range 300-308.\n * @param {string | URL} location The location to redirect to.\n */\nexport function redirect(status, location) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 300 || status > 308)) {\n\t\tthrow new Error('Invalid status code');\n\t}\n\n\treturn new Redirect(status, location.toString());\n}\n\n/**\n * Create a JSON `Response` object from the supplied data.\n * @param {any} data The value that will be serialized as JSON.\n * @param {ResponseInit} [init] Options such as `status` and `headers` that will be added to the response. `Content-Type: application/json` and `Content-Length` headers will be added automatically.\n */\nexport function json(data, init) {\n\t// TODO deprecate this in favour of `Response.json` when it's\n\t// more widely supported\n\tconst body = JSON.stringify(data);\n\n\t// we can't just do `text(JSON.stringify(data), init)` because\n\t// it will set a default `content-type` header. duplicated code\n\t// means less duplicated work\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-length')) {\n\t\theaders.set('content-length', encoder.encode(body).byteLength.toString());\n\t}\n\n\tif (!headers.has('content-type')) {\n\t\theaders.set('content-type', 'application/json');\n\t}\n\n\treturn new Response(body, {\n\t\t...init,\n\t\theaders\n\t});\n}\n\nconst encoder = new TextEncoder();\n\n/**\n * Create a `Response` object from the supplied body.\n * @param {string} body The value that will be used as-is.\n * @param {ResponseInit} [init] Options such as `status` and `headers` that will be added to the response. A `Content-Length` header will be added automatically.\n */\nexport function text(body, init) {\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-length')) {\n\t\tconst encoded = encoder.encode(body);\n\t\theaders.set('content-length', encoded.byteLength.toString());\n\t\treturn new Response(encoded, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\treturn new Response(body, {\n\t\t...init,\n\t\theaders\n\t});\n}\n\n/**\n * Create an `ActionFailure` object.\n * @template {Record<string, unknown> | undefined} [T=undefined]\n * @param {number} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses). Must be in the range 400-599.\n * @param {T} [data] Data associated with the failure (e.g. validation errors)\n * @returns {ActionFailure<T>}\n */\nexport function fail(status, data) {\n\treturn new ActionFailure(status, data);\n}\n\nconst basic_param_pattern = /\\[(\\[)?(\\.\\.\\.)?(\\w+?)(?:=(\\w+))?\\]\\]?/g;\n\n/**\n * Populate a route ID with params to resolve a pathname.\n * @example\n * ```js\n * resolvePath(\n *   `/blog/[slug]/[...somethingElse]`,\n *   {\n *     slug: 'hello-world',\n *     somethingElse: 'something/else'\n *   }\n * ); // `/blog/hello-world/something/else`\n * ```\n * @param {string} id\n * @param {Record<string, string | undefined>} params\n * @returns {string}\n */\nexport function resolvePath(id, params) {\n\tconst segments = get_route_segments(id);\n\treturn (\n\t\t'/' +\n\t\tsegments\n\t\t\t.map((segment) =>\n\t\t\t\tsegment.replace(basic_param_pattern, (_, optional, rest, name) => {\n\t\t\t\t\tconst param_value = params[name];\n\n\t\t\t\t\t// This is nested so TS correctly narrows the type\n\t\t\t\t\tif (!param_value) {\n\t\t\t\t\t\tif (optional) return '';\n\t\t\t\t\t\tif (rest && param_value !== undefined) return '';\n\t\t\t\t\t\tthrow new Error(`Missing parameter '${name}' in route ${id}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (param_value.startsWith('/') || param_value.endsWith('/'))\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Parameter '${name}' in route ${id} cannot start or end with a slash -- this would cause an invalid route like foo//bar`\n\t\t\t\t\t\t);\n\t\t\t\t\treturn param_value;\n\t\t\t\t})\n\t\t\t)\n\t\t\t.filter(Boolean)\n\t\t\t.join('/')\n\t);\n}\n","import { RO_Sitemap, RouteDefinitions, RouteDefinition, Sitemap, UserAgentDirective } from \"./types\";\n\nexport const encodeXML = (str: string) => {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&apos;\");\n};\n\nexport const generateSitemap = <S extends RO_Sitemap, J extends boolean>(\n  definitions: RouteDefinitions<S>,\n  baseUrl: string,\n  sitemap: S,\n  toJson?: J\n): object[] | string => {\n  const langs = ['', 'zh-HK'];\n\n  // Instantiate a routes object with all the static routes\n  // The will be override if you pass custom settings\n  const routes: Record<string, RouteDefinition<boolean>> = Object.keys(sitemap).reduce((acc, route) => {\n    const noLangRoute = route.replace('[[lang]]', '');\n    const isDynamic = noLangRoute.includes(\"[\");\n    if (!isDynamic && definitions[route as keyof typeof definitions] !== false) {\n      langs.forEach((lang) => {\n        const langedRoute = route.replace(\"/[[lang]]\", lang ? `/${lang}` : '');\n        Object.assign(acc, {\n          [langedRoute]: { path: langedRoute, priority: route === \"/\" ? \"1.0\" : \"0.7\" } as RouteDefinition<boolean>\n        });\n      });\n    }\n    return acc;\n  }, {});\n\n  // Add custom route data to the routes object\n  Object.entries(sitemap).forEach(([route]) => {\n    const RouteDefinition = definitions[route as keyof typeof definitions];\n    if (RouteDefinition) {\n      if (Array.isArray(RouteDefinition)) {\n        RouteDefinition.forEach((definition) => {\n          if (definition) {\n            langs.forEach((lang) => {\n              const def = { ...definition, path: (lang ? `/${lang}` : '') + definition.path };\n              Object.assign(routes, { [(lang ? `/${lang}` : '') + def.path]: def });\n            });\n          }\n        });\n      } else {\n        Object.assign(routes, { [RouteDefinition?.path || route]: RouteDefinition });\n      }\n    }\n  });\n\n  if (toJson === true) {\n    return Object.entries(routes) as object[];\n  }\n  // Build and return sitemap\n  // refs : https://github.com/sveltejs/kit/issues/1142#issuecomment-1032407693 https://github.com/Shopify/hydrogen/blob/1de3864214d04d9214e323d7f0a953c7b9309b7b/templates/demo-store/src/routes/sitemap.xml.server.ts\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"\nxmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\nxmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\nxmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"\nxmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\"\nxmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\"\nxmlns:pagemap=\"http://www.google.com/schemas/sitemap-pagemap/1.0\"\nxmlns:xhtml=\"http://www.w3.org/1999/xhtml\">\n${Object.entries(routes)\n\n  .map(([r, d]) => {\n    if (!d) return \"\";\n    const { path, priority, changeFreq, image, lastMod } = d;\n    return `  <url>\n    <loc>${baseUrl}${path || r}</loc>\n  ${lastMod ? `<lastmod>${lastMod}</lastmod>` : \"\"}\n  ${priority ? `<priority>${priority}</priority>` : \"\"}\n  ${changeFreq ? `<changefreq>${changeFreq}</changefreq>` : \"\"}\n  ${\n    image\n      ? `\n    <image:image>\n      <image:loc>${encodeXML(image.url)}</image:loc>\n      <image:title>${encodeXML(image.title ?? \" \")}</image:title>\n      <image:caption>${encodeXML(image.altText ?? \" \")}</image:caption>\n    </image:image>`\n      : \"\"\n  }</url>`;\n  })\n  .join(\"\\n\")}\n</urlset>`;\n};\n\nexport const generateRobots = <S extends RO_Sitemap>(\n  robots: boolean | UserAgentDirective<S> | UserAgentDirective<S>[],\n  baseUrl: string\n) => {\n  // Instantiate the agents to render array\n  const agentsToRender: { agent: string; crawlDelay?: number; allow: string[]; disallow: string[] }[] = [];\n\n  const parseAgent = (agent: UserAgentDirective<S>) => {\n    const infos = Object.entries(agent.paths).reduce<{ allow: string[]; disallow: string[] }>(\n      (acc, [route, allow]) => {\n        if (allow) {\n          acc.allow.push(route);\n        } else {\n          acc.disallow.push(route);\n        }\n        return acc;\n      },\n      { allow: [], disallow: [] }\n    );\n\n    // Use the same config for all the user agents\n    if (Array.isArray(agent.userAgent)) {\n      agent.userAgent.forEach((a) => {\n        agentsToRender.push({\n          agent: a,\n          crawlDelay: agent.crawlDelay,\n          ...infos\n        });\n      });\n    } else {\n      agentsToRender.push({\n        agent: agent.userAgent || \"*\",\n        crawlDelay: agent.crawlDelay,\n        ...infos\n      });\n    }\n  };\n\n  // Build a default robot.txt for all user-agents\n  if (typeof robots === \"boolean\") {\n    agentsToRender.push({\n      agent: \"*\",\n      allow: robots === true ? [\"/\"] : [],\n      disallow: robots === false ? [\"/\"] : []\n    });\n  } else if (!Array.isArray(robots)) {\n    parseAgent(robots);\n  } else {\n    robots.forEach(parseAgent);\n  }\n\n  return `${agentsToRender\n    .map(({ agent, crawlDelay, allow, disallow }) =>\n      `User-agent: ${agent}\nSitemap: ${baseUrl}/sitemap.xml\n${crawlDelay ? `Crawl-delay: ${crawlDelay}` : \"\"}\n${allow.map((route) => `Allow: ${route}`).join(\"\\n\")}\n${disallow.map((route) => `Disallow: ${route}`).join(\"\\n\")}\n`\n        // Make it pretty\n        .replace(/\\n\\n/g, \"\\n\")\n        .replace(/\\n\\n/g, \"\\n\")\n    )\n    .join(\"\\n\")}\n`.trim();\n};\n","import { Handle, json } from \"@sveltejs/kit\";\nimport type { SitemapParams, RO_Sitemap } from \"./types\";\nimport { generateRobots, generateSitemap } from \"./utils\";\n\nexport const sitemapHook =\n  <S extends RO_Sitemap>(sitemap: S, params: SitemapParams<S> | undefined = {}): Handle =>\n  async ({ event, resolve }) => {\n    if (event.url.pathname === \"/sitemap.xml\") {\n      // Get dynamic custom definition for app routes\n      const routeDefinitions = params.getRoutes ? await params.getRoutes(event) : {};\n      const toJson = event.url.searchParams.get(\"format\") === \"json\";\n      const generatedSitemap = generateSitemap(routeDefinitions, event.url.origin, sitemap, toJson);\n      if (toJson) {\n        return json(generatedSitemap);\n      }\n      return new Response(generatedSitemap as string, {\n        status: 200,\n        headers: {\n          \"Content-Type\": \"application/xml\"\n        }\n      });\n    }\n\n    if (event.url.pathname === \"/robots.txt\") {\n      // Get dynamic robots directives\n      const robots = params.getRobots ? await params.getRobots(event) : true;\n\n      // Build and return the robots.txt\n      return new Response(generateRobots<S>(robots, event.url.origin), {\n        headers: {\n          \"content-type\": \"text/plain\",\n          // Cache it for 24 hours\n          \"cache-control\": `max-age=${60 * 60 * 24}`\n        }\n      });\n    }\n\n    return resolve(event);\n  };\n"]}
\ No newline at end of file
diff --git a/dist/index.mjs b/dist/index.mjs
index ad7e63d45201f88e8f0684f52a5baeddbb0b7522..858fd386cf223dc0743fc1b734fe3fb683db68e2 100644
--- a/dist/index.mjs
+++ b/dist/index.mjs
@@ -1,4 +1,4 @@
-import{a as p,b as u,c as x}from"./chunk-PC4KRD4L.mjs";function d(r,i){let t=new Headers(i==null?void 0:i.headers);return t.has("content-type")||t.set("content-type","application/json"),new Response(JSON.stringify(r),u(p({},i),{headers:t}))}var c=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),y=(r,i,t,l)=>{let a=Object.keys(t).reduce((s,e)=>(!e.includes("[")&&r[e]!==!1&&Object.assign(s,{[e]:{path:e,priority:e==="/"?"1.0":"0.7"}}),s),{});return Object.entries(t).forEach(([s])=>{let e=r[s];e&&(Array.isArray(e)?e.forEach(o=>{o&&Object.assign(a,{[o.path]:o})}):Object.assign(a,{[(e==null?void 0:e.path)||s]:e}))}),l===!0?Object.entries(a):`<?xml version="1.0" encoding="UTF-8"?>
+import{a as u,b as g,c as x}from"./chunk-PC4KRD4L.mjs";function $(n,s){let t=JSON.stringify(n),a=new Headers(s==null?void 0:s.headers);return a.has("content-length")||a.set("content-length",R.encode(t).byteLength.toString()),a.has("content-type")||a.set("content-type","application/json"),new Response(t,g(u({},s),{headers:a}))}var R=new TextEncoder;var h=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),y=(n,s,t,a)=>{let c=["","zh-HK"],o=Object.keys(t).reduce((r,e)=>(!e.replace("[[lang]]","").includes("[")&&n[e]!==!1&&c.forEach(p=>{let m=e.replace("/[[lang]]",p?`/${p}`:"");Object.assign(r,{[m]:{path:m,priority:e==="/"?"1.0":"0.7"}})}),r),{});return Object.entries(t).forEach(([r])=>{let e=n[r];e&&(Array.isArray(e)?e.forEach(i=>{i&&c.forEach(l=>{let p=g(u({},i),{path:(l?`/${l}`:"")+i.path});Object.assign(o,{[(l?`/${l}`:"")+p.path]:p})})}):Object.assign(o,{[(e==null?void 0:e.path)||r]:e}))}),a===!0?Object.entries(o):`<?xml version="1.0" encoding="UTF-8"?>
 <urlset
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
@@ -9,29 +9,28 @@ xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"
 xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"
 xmlns:pagemap="http://www.google.com/schemas/sitemap-pagemap/1.0"
 xmlns:xhtml="http://www.w3.org/1999/xhtml">
-${Object.entries(a).map(([s,e])=>{var h,f;if(!e)return"";let{path:o,priority:n,changeFreq:g,image:m,lastMod:w}=e;return`  <url>
-    <loc>${i}${o||s}</loc>
-  </url>
-  ${w?`<lastmod>${w}</lastmod>`:""}
-  ${n?`<priority>${n}</priority>`:""}
-  ${g?`<changefreq>${g}</changefreq>`:""}
+${Object.entries(o).map(([r,e])=>{var w,d;if(!e)return"";let{path:i,priority:l,changeFreq:p,image:m,lastMod:f}=e;return`  <url>
+    <loc>${s}${i||r}</loc>
+  ${f?`<lastmod>${f}</lastmod>`:""}
+  ${l?`<priority>${l}</priority>`:""}
+  ${p?`<changefreq>${p}</changefreq>`:""}
   ${m?`
     <image:image>
-      <image:loc>${c(m.url)}</image:loc>
-      <image:title>${c((h=m.title)!=null?h:" ")}</image:title>
-      <image:caption>${c((f=m.altText)!=null?f:" ")}</image:caption>
-    </image:image>`:""}`}).join(`
+      <image:loc>${h(m.url)}</image:loc>
+      <image:title>${h((w=m.title)!=null?w:" ")}</image:title>
+      <image:caption>${h((d=m.altText)!=null?d:" ")}</image:caption>
+    </image:image>`:""}</url>`}).join(`
 `)}
-</urlset>`},S=(r,i)=>{let t=[],l=a=>{let s=Object.entries(a.paths).reduce((e,[o,n])=>(n?e.allow.push(o):e.disallow.push(o),e),{allow:[],disallow:[]});Array.isArray(a.userAgent)?a.userAgent.forEach(e=>{t.push(p({agent:e,crawlDelay:a.crawlDelay},s))}):t.push(p({agent:a.userAgent||"*",crawlDelay:a.crawlDelay},s))};return typeof r=="boolean"?t.push({agent:"*",allow:r===!0?["/"]:[],disallow:r===!1?["/"]:[]}):Array.isArray(r)?r.forEach(l):l(r),`${t.map(({agent:a,crawlDelay:s,allow:e,disallow:o})=>`User-agent: ${a}
-Sitemap: ${i}/sitemap.xml
-${s?`Crawl-delay: ${s}`:""}
-${e.map(n=>`Allow: ${n}`).join(`
+</urlset>`},S=(n,s)=>{let t=[],a=c=>{let o=Object.entries(c.paths).reduce((r,[e,i])=>(i?r.allow.push(e):r.disallow.push(e),r),{allow:[],disallow:[]});Array.isArray(c.userAgent)?c.userAgent.forEach(r=>{t.push(u({agent:r,crawlDelay:c.crawlDelay},o))}):t.push(u({agent:c.userAgent||"*",crawlDelay:c.crawlDelay},o))};return typeof n=="boolean"?t.push({agent:"*",allow:n===!0?["/"]:[],disallow:n===!1?["/"]:[]}):Array.isArray(n)?n.forEach(a):a(n),`${t.map(({agent:c,crawlDelay:o,allow:r,disallow:e})=>`User-agent: ${c}
+Sitemap: ${s}/sitemap.xml
+${o?`Crawl-delay: ${o}`:""}
+${r.map(i=>`Allow: ${i}`).join(`
 `)}
-${o.map(n=>`Disallow: ${n}`).join(`
+${e.map(i=>`Disallow: ${i}`).join(`
 `)}
 `.replace(/\n\n/g,`
 `).replace(/\n\n/g,`
 `)).join(`
 `)}
-`.trim()};var v=(r,i={})=>a=>x(void 0,[a],function*({event:t,resolve:l}){if(t.url.pathname==="/sitemap.xml"){let s=i.getRoutes?yield i.getRoutes(t):{},e=t.url.searchParams.get("format")==="json",o=y(s,t.url.origin,r,e);return e?d(o):new Response(o,{status:200,headers:{"Content-Type":"application/xml"}})}if(t.url.pathname==="/robots.txt"){let s=i.getRobots?yield i.getRobots(t):!0;return new Response(S(s,t.url.origin),{headers:{"content-type":"text/plain","cache-control":`max-age=${60*60*24}`}})}return l(t)});export{c as encodeXML,S as generateRobots,y as generateSitemap,v as sitemapHook};
+`.trim()};var V=(n,s={})=>c=>x(void 0,[c],function*({event:t,resolve:a}){if(t.url.pathname==="/sitemap.xml"){let o=s.getRoutes?yield s.getRoutes(t):{},r=t.url.searchParams.get("format")==="json",e=y(o,t.url.origin,n,r);return r?$(e):new Response(e,{status:200,headers:{"Content-Type":"application/xml"}})}if(t.url.pathname==="/robots.txt"){let o=s.getRobots?yield s.getRobots(t):!0;return new Response(S(o,t.url.origin),{headers:{"content-type":"text/plain","cache-control":`max-age=${60*60*24}`}})}return a(t)});export{h as encodeXML,S as generateRobots,y as generateSitemap,V as sitemapHook};
 //# sourceMappingURL=index.mjs.map
\ No newline at end of file
diff --git a/dist/index.mjs.map b/dist/index.mjs.map
index 835eabeb8c5042fe8d06d9ba8fec69e10a1c8b38..e1b3ffcbde15bb05c3f25b4dc542f82fcfb0070a 100644
--- a/dist/index.mjs.map
+++ b/dist/index.mjs.map
@@ -1 +1 @@
-{"version":3,"sources":["../../node_modules/.pnpm/@sveltejs+kit@1.0.1_svelte@3.55.0+vite@4.0.3/node_modules/@sveltejs/kit/src/exports/index.js","../src/utils.ts","../src/hook.ts"],"sourcesContent":["import { HttpError, Redirect, ActionFailure } from '../runtime/control.js';\nimport { BROWSER, DEV } from 'esm-env';\n\n// For some reason we need to type the params as well here,\n// JSdoc doesn't seem to like @type with function overloads\n/**\n * @type {import('@sveltejs/kit').error}\n * @param {number} status\n * @param {any} message\n */\nexport function error(status, message) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 400 || status > 599)) {\n\t\tthrow new Error(`HTTP error status codes must be between 400 and 599 — ${status} is invalid`);\n\t}\n\n\treturn new HttpError(status, message);\n}\n\n/** @type {import('@sveltejs/kit').redirect} */\nexport function redirect(status, location) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 300 || status > 308)) {\n\t\tthrow new Error('Invalid status code');\n\t}\n\n\treturn new Redirect(status, location);\n}\n\n/** @type {import('@sveltejs/kit').json} */\nexport function json(data, init) {\n\t// TODO deprecate this in favour of `Response.json` when it's\n\t// more widely supported\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-type')) {\n\t\theaders.set('content-type', 'application/json');\n\t}\n\n\treturn new Response(JSON.stringify(data), {\n\t\t...init,\n\t\theaders\n\t});\n}\n\n/**\n * Generates an `ActionFailure` object.\n * @param {number} status\n * @param {Record<string, any> | undefined} [data]\n */\nexport function fail(status, data) {\n\treturn new ActionFailure(status, data);\n}\n\n// TODO remove for 1.0\nexport function invalid() {\n\tthrow new Error('invalid(...) is now fail(...)');\n}\n","import { RO_Sitemap, RouteDefinitions, RouteDefinition, Sitemap, UserAgentDirective } from \"./types\";\n\nexport const encodeXML = (str: string) => {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&apos;\");\n};\n\nexport const generateSitemap = <S extends RO_Sitemap, J extends boolean>(\n  definitions: RouteDefinitions<S>,\n  baseUrl: string,\n  sitemap: S,\n  toJson?: J\n): object[] | string => {\n  // Instantiate a routes object with all the static routes\n  // The will be override if you pass custom settings\n  const routes: Record<string, RouteDefinition<boolean>> = Object.keys(sitemap).reduce((acc, route) => {\n    const isDynamic = route.includes(\"[\");\n    if (!isDynamic && definitions[route as keyof typeof definitions] !== false) {\n      Object.assign(acc, {\n        [route]: { path: route, priority: route === \"/\" ? \"1.0\" : \"0.7\" } as RouteDefinition<boolean>\n      });\n    }\n    return acc;\n  }, {});\n\n  // Add custom route data to the routes object\n  Object.entries(sitemap).forEach(([route]) => {\n    const RouteDefinition = definitions[route as keyof typeof definitions];\n    if (RouteDefinition) {\n      if (Array.isArray(RouteDefinition)) {\n        RouteDefinition.forEach((definition) => {\n          if (definition) {\n            Object.assign(routes, { [definition.path]: definition });\n          }\n        });\n      } else {\n        Object.assign(routes, { [RouteDefinition?.path || route]: RouteDefinition });\n      }\n    }\n  });\n\n  if (toJson === true) {\n    return Object.entries(routes) as object[];\n  }\n  // Build and return sitemap\n  // refs : https://github.com/sveltejs/kit/issues/1142#issuecomment-1032407693 https://github.com/Shopify/hydrogen/blob/1de3864214d04d9214e323d7f0a953c7b9309b7b/templates/demo-store/src/routes/sitemap.xml.server.ts\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"\nxmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\nxmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\nxmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"\nxmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\"\nxmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\"\nxmlns:pagemap=\"http://www.google.com/schemas/sitemap-pagemap/1.0\"\nxmlns:xhtml=\"http://www.w3.org/1999/xhtml\">\n${Object.entries(routes)\n\n  .map(([r, d]) => {\n    if (!d) return \"\";\n    const { path, priority, changeFreq, image, lastMod } = d;\n    return `  <url>\n    <loc>${baseUrl}${path || r}</loc>\n  </url>\n  ${lastMod ? `<lastmod>${lastMod}</lastmod>` : \"\"}\n  ${priority ? `<priority>${priority}</priority>` : \"\"}\n  ${changeFreq ? `<changefreq>${changeFreq}</changefreq>` : \"\"}\n  ${\n    image\n      ? `\n    <image:image>\n      <image:loc>${encodeXML(image.url)}</image:loc>\n      <image:title>${encodeXML(image.title ?? \" \")}</image:title>\n      <image:caption>${encodeXML(image.altText ?? \" \")}</image:caption>\n    </image:image>`\n      : \"\"\n  }`;\n  })\n  .join(\"\\n\")}\n</urlset>`;\n};\n\nexport const generateRobots = <S extends RO_Sitemap>(\n  robots: boolean | UserAgentDirective<S> | UserAgentDirective<S>[],\n  baseUrl: string\n) => {\n  // Instantiate the agents to render array\n  const agentsToRender: { agent: string; crawlDelay?: number; allow: string[]; disallow: string[] }[] = [];\n\n  const parseAgent = (agent: UserAgentDirective<S>) => {\n    const infos = Object.entries(agent.paths).reduce<{ allow: string[]; disallow: string[] }>(\n      (acc, [route, allow]) => {\n        if (allow) {\n          acc.allow.push(route);\n        } else {\n          acc.disallow.push(route);\n        }\n        return acc;\n      },\n      { allow: [], disallow: [] }\n    );\n\n    // Use the same config for all the user agents\n    if (Array.isArray(agent.userAgent)) {\n      agent.userAgent.forEach((a) => {\n        agentsToRender.push({\n          agent: a,\n          crawlDelay: agent.crawlDelay,\n          ...infos\n        });\n      });\n    } else {\n      agentsToRender.push({\n        agent: agent.userAgent || \"*\",\n        crawlDelay: agent.crawlDelay,\n        ...infos\n      });\n    }\n  };\n\n  // Build a default robot.txt for all user-agents\n  if (typeof robots === \"boolean\") {\n    agentsToRender.push({\n      agent: \"*\",\n      allow: robots === true ? [\"/\"] : [],\n      disallow: robots === false ? [\"/\"] : []\n    });\n  } else if (!Array.isArray(robots)) {\n    parseAgent(robots);\n  } else {\n    robots.forEach(parseAgent);\n  }\n\n  return `${agentsToRender\n    .map(({ agent, crawlDelay, allow, disallow }) =>\n      `User-agent: ${agent}\nSitemap: ${baseUrl}/sitemap.xml\n${crawlDelay ? `Crawl-delay: ${crawlDelay}` : \"\"}\n${allow.map((route) => `Allow: ${route}`).join(\"\\n\")}\n${disallow.map((route) => `Disallow: ${route}`).join(\"\\n\")}\n`\n        // Make it pretty\n        .replace(/\\n\\n/g, \"\\n\")\n        .replace(/\\n\\n/g, \"\\n\")\n    )\n    .join(\"\\n\")}\n`.trim();\n};\n","import { Handle, json } from \"@sveltejs/kit\";\nimport type { SitemapParams, RO_Sitemap } from \"./types\";\nimport { generateRobots, generateSitemap } from \"./utils\";\n\nexport const sitemapHook =\n  <S extends RO_Sitemap>(sitemap: S, params: SitemapParams<S> | undefined = {}): Handle =>\n  async ({ event, resolve }) => {\n    if (event.url.pathname === \"/sitemap.xml\") {\n      // Get dynamic custom definition for app routes\n      const routeDefinitions = params.getRoutes ? await params.getRoutes(event) : {};\n      const toJson = event.url.searchParams.get(\"format\") === \"json\";\n      const generatedSitemap = generateSitemap(routeDefinitions, event.url.origin, sitemap, toJson);\n      if (toJson) {\n        return json(generatedSitemap);\n      }\n      return new Response(generatedSitemap as string, {\n        status: 200,\n        headers: {\n          \"Content-Type\": \"application/xml\"\n        }\n      });\n    }\n\n    if (event.url.pathname === \"/robots.txt\") {\n      // Get dynamic robots directives\n      const robots = params.getRobots ? await params.getRobots(event) : true;\n\n      // Build and return the robots.txt\n      return new Response(generateRobots<S>(robots, event.url.origin), {\n        headers: {\n          \"content-type\": \"text/plain\",\n          // Cache it for 24 hours\n          \"cache-control\": `max-age=${60 * 60 * 24}`\n        }\n      });\n    }\n\n    return resolve(event);\n  };\n"],"mappings":"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","names":["json","data","init","headers","__spreadProps","__spreadValues","encodeXML","str","generateSitemap","definitions","baseUrl","sitemap","toJson","routes","acc","route","RouteDefinition","definition","r","d","_a","_b","path","priority","changeFreq","image","lastMod","generateRobots","robots","agentsToRender","parseAgent","agent","infos","allow","a","__spreadValues","crawlDelay","disallow","sitemapHook","sitemap","params","_0","__async","event","resolve","routeDefinitions","toJson","generatedSitemap","generateSitemap","json","robots","generateRobots"]}
\ No newline at end of file
+{"version":3,"sources":["../node_modules/.pnpm/@sveltejs+kit@1.27.6_svelte@3.59.2_vite@4.5.0/node_modules/@sveltejs/kit/src/exports/index.js","../src/utils.ts","../src/hook.ts"],"sourcesContent":["import { HttpError, Redirect, ActionFailure } from '../runtime/control.js';\nimport { BROWSER, DEV } from 'esm-env';\nimport { get_route_segments } from '../utils/routing.js';\n\nexport { VERSION } from '../version.js';\n\n/**\n * @overload\n * @param {number} status\n * @param {App.Error} body\n * @return {HttpError}\n */\n\n/**\n * @overload\n * @param {number} status\n * @param {{ message: string } extends App.Error ? App.Error | string | undefined : never} [body]\n * @return {HttpError}\n */\n\n/**\n * Creates an `HttpError` object with an HTTP status code and an optional message.\n * This object, if thrown during request handling, will cause SvelteKit to\n * return an error response without invoking `handleError`.\n * Make sure you're not catching the thrown error, which would prevent SvelteKit from handling it.\n * @param {number} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses). Must be in the range 400-599.\n * @param {{ message: string } extends App.Error ? App.Error | string | undefined : never} body An object that conforms to the App.Error type. If a string is passed, it will be used as the message property.\n */\nexport function error(status, body) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 400 || status > 599)) {\n\t\tthrow new Error(`HTTP error status codes must be between 400 and 599 — ${status} is invalid`);\n\t}\n\n\treturn new HttpError(status, body);\n}\n\n/**\n * Create a `Redirect` object. If thrown during request handling, SvelteKit will return a redirect response.\n * Make sure you're not catching the thrown redirect, which would prevent SvelteKit from handling it.\n * @param {300 | 301 | 302 | 303 | 304 | 305 | 306 | 307 | 308} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages). Must be in the range 300-308.\n * @param {string | URL} location The location to redirect to.\n */\nexport function redirect(status, location) {\n\tif ((!BROWSER || DEV) && (isNaN(status) || status < 300 || status > 308)) {\n\t\tthrow new Error('Invalid status code');\n\t}\n\n\treturn new Redirect(status, location.toString());\n}\n\n/**\n * Create a JSON `Response` object from the supplied data.\n * @param {any} data The value that will be serialized as JSON.\n * @param {ResponseInit} [init] Options such as `status` and `headers` that will be added to the response. `Content-Type: application/json` and `Content-Length` headers will be added automatically.\n */\nexport function json(data, init) {\n\t// TODO deprecate this in favour of `Response.json` when it's\n\t// more widely supported\n\tconst body = JSON.stringify(data);\n\n\t// we can't just do `text(JSON.stringify(data), init)` because\n\t// it will set a default `content-type` header. duplicated code\n\t// means less duplicated work\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-length')) {\n\t\theaders.set('content-length', encoder.encode(body).byteLength.toString());\n\t}\n\n\tif (!headers.has('content-type')) {\n\t\theaders.set('content-type', 'application/json');\n\t}\n\n\treturn new Response(body, {\n\t\t...init,\n\t\theaders\n\t});\n}\n\nconst encoder = new TextEncoder();\n\n/**\n * Create a `Response` object from the supplied body.\n * @param {string} body The value that will be used as-is.\n * @param {ResponseInit} [init] Options such as `status` and `headers` that will be added to the response. A `Content-Length` header will be added automatically.\n */\nexport function text(body, init) {\n\tconst headers = new Headers(init?.headers);\n\tif (!headers.has('content-length')) {\n\t\tconst encoded = encoder.encode(body);\n\t\theaders.set('content-length', encoded.byteLength.toString());\n\t\treturn new Response(encoded, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\treturn new Response(body, {\n\t\t...init,\n\t\theaders\n\t});\n}\n\n/**\n * Create an `ActionFailure` object.\n * @template {Record<string, unknown> | undefined} [T=undefined]\n * @param {number} status The [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses). Must be in the range 400-599.\n * @param {T} [data] Data associated with the failure (e.g. validation errors)\n * @returns {ActionFailure<T>}\n */\nexport function fail(status, data) {\n\treturn new ActionFailure(status, data);\n}\n\nconst basic_param_pattern = /\\[(\\[)?(\\.\\.\\.)?(\\w+?)(?:=(\\w+))?\\]\\]?/g;\n\n/**\n * Populate a route ID with params to resolve a pathname.\n * @example\n * ```js\n * resolvePath(\n *   `/blog/[slug]/[...somethingElse]`,\n *   {\n *     slug: 'hello-world',\n *     somethingElse: 'something/else'\n *   }\n * ); // `/blog/hello-world/something/else`\n * ```\n * @param {string} id\n * @param {Record<string, string | undefined>} params\n * @returns {string}\n */\nexport function resolvePath(id, params) {\n\tconst segments = get_route_segments(id);\n\treturn (\n\t\t'/' +\n\t\tsegments\n\t\t\t.map((segment) =>\n\t\t\t\tsegment.replace(basic_param_pattern, (_, optional, rest, name) => {\n\t\t\t\t\tconst param_value = params[name];\n\n\t\t\t\t\t// This is nested so TS correctly narrows the type\n\t\t\t\t\tif (!param_value) {\n\t\t\t\t\t\tif (optional) return '';\n\t\t\t\t\t\tif (rest && param_value !== undefined) return '';\n\t\t\t\t\t\tthrow new Error(`Missing parameter '${name}' in route ${id}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (param_value.startsWith('/') || param_value.endsWith('/'))\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Parameter '${name}' in route ${id} cannot start or end with a slash -- this would cause an invalid route like foo//bar`\n\t\t\t\t\t\t);\n\t\t\t\t\treturn param_value;\n\t\t\t\t})\n\t\t\t)\n\t\t\t.filter(Boolean)\n\t\t\t.join('/')\n\t);\n}\n","import { RO_Sitemap, RouteDefinitions, RouteDefinition, Sitemap, UserAgentDirective } from \"./types\";\n\nexport const encodeXML = (str: string) => {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&apos;\");\n};\n\nexport const generateSitemap = <S extends RO_Sitemap, J extends boolean>(\n  definitions: RouteDefinitions<S>,\n  baseUrl: string,\n  sitemap: S,\n  toJson?: J\n): object[] | string => {\n  const langs = ['', 'zh-HK'];\n\n  // Instantiate a routes object with all the static routes\n  // The will be override if you pass custom settings\n  const routes: Record<string, RouteDefinition<boolean>> = Object.keys(sitemap).reduce((acc, route) => {\n    const noLangRoute = route.replace('[[lang]]', '');\n    const isDynamic = noLangRoute.includes(\"[\");\n    if (!isDynamic && definitions[route as keyof typeof definitions] !== false) {\n      langs.forEach((lang) => {\n        const langedRoute = route.replace(\"/[[lang]]\", lang ? `/${lang}` : '');\n        Object.assign(acc, {\n          [langedRoute]: { path: langedRoute, priority: route === \"/\" ? \"1.0\" : \"0.7\" } as RouteDefinition<boolean>\n        });\n      });\n    }\n    return acc;\n  }, {});\n\n  // Add custom route data to the routes object\n  Object.entries(sitemap).forEach(([route]) => {\n    const RouteDefinition = definitions[route as keyof typeof definitions];\n    if (RouteDefinition) {\n      if (Array.isArray(RouteDefinition)) {\n        RouteDefinition.forEach((definition) => {\n          if (definition) {\n            langs.forEach((lang) => {\n              const def = { ...definition, path: (lang ? `/${lang}` : '') + definition.path };\n              Object.assign(routes, { [(lang ? `/${lang}` : '') + def.path]: def });\n            });\n          }\n        });\n      } else {\n        Object.assign(routes, { [RouteDefinition?.path || route]: RouteDefinition });\n      }\n    }\n  });\n\n  if (toJson === true) {\n    return Object.entries(routes) as object[];\n  }\n  // Build and return sitemap\n  // refs : https://github.com/sveltejs/kit/issues/1142#issuecomment-1032407693 https://github.com/Shopify/hydrogen/blob/1de3864214d04d9214e323d7f0a953c7b9309b7b/templates/demo-store/src/routes/sitemap.xml.server.ts\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"\nxmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\nxmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\nxmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"\nxmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\"\nxmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\"\nxmlns:pagemap=\"http://www.google.com/schemas/sitemap-pagemap/1.0\"\nxmlns:xhtml=\"http://www.w3.org/1999/xhtml\">\n${Object.entries(routes)\n\n  .map(([r, d]) => {\n    if (!d) return \"\";\n    const { path, priority, changeFreq, image, lastMod } = d;\n    return `  <url>\n    <loc>${baseUrl}${path || r}</loc>\n  ${lastMod ? `<lastmod>${lastMod}</lastmod>` : \"\"}\n  ${priority ? `<priority>${priority}</priority>` : \"\"}\n  ${changeFreq ? `<changefreq>${changeFreq}</changefreq>` : \"\"}\n  ${\n    image\n      ? `\n    <image:image>\n      <image:loc>${encodeXML(image.url)}</image:loc>\n      <image:title>${encodeXML(image.title ?? \" \")}</image:title>\n      <image:caption>${encodeXML(image.altText ?? \" \")}</image:caption>\n    </image:image>`\n      : \"\"\n  }</url>`;\n  })\n  .join(\"\\n\")}\n</urlset>`;\n};\n\nexport const generateRobots = <S extends RO_Sitemap>(\n  robots: boolean | UserAgentDirective<S> | UserAgentDirective<S>[],\n  baseUrl: string\n) => {\n  // Instantiate the agents to render array\n  const agentsToRender: { agent: string; crawlDelay?: number; allow: string[]; disallow: string[] }[] = [];\n\n  const parseAgent = (agent: UserAgentDirective<S>) => {\n    const infos = Object.entries(agent.paths).reduce<{ allow: string[]; disallow: string[] }>(\n      (acc, [route, allow]) => {\n        if (allow) {\n          acc.allow.push(route);\n        } else {\n          acc.disallow.push(route);\n        }\n        return acc;\n      },\n      { allow: [], disallow: [] }\n    );\n\n    // Use the same config for all the user agents\n    if (Array.isArray(agent.userAgent)) {\n      agent.userAgent.forEach((a) => {\n        agentsToRender.push({\n          agent: a,\n          crawlDelay: agent.crawlDelay,\n          ...infos\n        });\n      });\n    } else {\n      agentsToRender.push({\n        agent: agent.userAgent || \"*\",\n        crawlDelay: agent.crawlDelay,\n        ...infos\n      });\n    }\n  };\n\n  // Build a default robot.txt for all user-agents\n  if (typeof robots === \"boolean\") {\n    agentsToRender.push({\n      agent: \"*\",\n      allow: robots === true ? [\"/\"] : [],\n      disallow: robots === false ? [\"/\"] : []\n    });\n  } else if (!Array.isArray(robots)) {\n    parseAgent(robots);\n  } else {\n    robots.forEach(parseAgent);\n  }\n\n  return `${agentsToRender\n    .map(({ agent, crawlDelay, allow, disallow }) =>\n      `User-agent: ${agent}\nSitemap: ${baseUrl}/sitemap.xml\n${crawlDelay ? `Crawl-delay: ${crawlDelay}` : \"\"}\n${allow.map((route) => `Allow: ${route}`).join(\"\\n\")}\n${disallow.map((route) => `Disallow: ${route}`).join(\"\\n\")}\n`\n        // Make it pretty\n        .replace(/\\n\\n/g, \"\\n\")\n        .replace(/\\n\\n/g, \"\\n\")\n    )\n    .join(\"\\n\")}\n`.trim();\n};\n","import { Handle, json } from \"@sveltejs/kit\";\nimport type { SitemapParams, RO_Sitemap } from \"./types\";\nimport { generateRobots, generateSitemap } from \"./utils\";\n\nexport const sitemapHook =\n  <S extends RO_Sitemap>(sitemap: S, params: SitemapParams<S> | undefined = {}): Handle =>\n  async ({ event, resolve }) => {\n    if (event.url.pathname === \"/sitemap.xml\") {\n      // Get dynamic custom definition for app routes\n      const routeDefinitions = params.getRoutes ? await params.getRoutes(event) : {};\n      const toJson = event.url.searchParams.get(\"format\") === \"json\";\n      const generatedSitemap = generateSitemap(routeDefinitions, event.url.origin, sitemap, toJson);\n      if (toJson) {\n        return json(generatedSitemap);\n      }\n      return new Response(generatedSitemap as string, {\n        status: 200,\n        headers: {\n          \"Content-Type\": \"application/xml\"\n        }\n      });\n    }\n\n    if (event.url.pathname === \"/robots.txt\") {\n      // Get dynamic robots directives\n      const robots = params.getRobots ? await params.getRobots(event) : true;\n\n      // Build and return the robots.txt\n      return new Response(generateRobots<S>(robots, event.url.origin), {\n        headers: {\n          \"content-type\": \"text/plain\",\n          // Cache it for 24 hours\n          \"cache-control\": `max-age=${60 * 60 * 24}`\n        }\n      });\n    }\n\n    return resolve(event);\n  };\n"],"mappings":"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","names":["json","data","init","body","headers","encoder","__spreadProps","__spreadValues","encodeXML","str","generateSitemap","definitions","baseUrl","sitemap","toJson","langs","routes","acc","route","lang","langedRoute","RouteDefinition","definition","def","__spreadProps","__spreadValues","d","_a","_b","path","priority","changeFreq","image","lastMod","generateRobots","robots","agentsToRender","parseAgent","agent","infos","allow","a","crawlDelay","disallow","sitemapHook","sitemap","params","_0","__async","event","resolve","routeDefinitions","toJson","generatedSitemap","generateSitemap","json","robots","generateRobots"]}
\ No newline at end of file
diff --git a/dist/plugin.js.map b/dist/plugin.js.map
index c55fd8fbfcdc242ab460993f208a04dd409e639e..cd41ef329aee1333e26f858002fac490b0ada8c1 100644
--- a/dist/plugin.js.map
+++ b/dist/plugin.js.map
@@ -1 +1 @@
-{"version":3,"sources":["../src/plugin.ts"],"names":["fs","hasPageInside","path","files","file","newPath","getRoutes","dir","routes","traverseRoutes","isDirectory","isPageFolder","id","dirBase","isFolder","p","sitemapPlugin","routesDir","sitemapFile","updateSitemap","server"],"mappings":"4BAAA,OAAOA,MAAQ,KAKf,IAAMC,EAAiBC,GAA0B,CAC/C,IAAMC,EAAQH,EAAG,YAAYE,CAAI,EACjC,OAAIC,EAAM,KAAMC,GAASA,IAAS,cAAc,EAAU,GACnDD,EAAM,KAAMC,GAAiB,CAClC,IAAMC,EAAUH,EAAO,IAAME,EAC7B,OAAIJ,EAAG,SAASK,CAAO,EAAE,YAAY,EAC5BJ,EAAcI,CAAO,EAErB,EAEX,CAAC,CACH,EAEMC,EAAaC,GAAyB,CAC1C,IAAIC,EAAkB,CAAC,EACjBC,EAAkBP,GAAiB,CACvC,IAAMQ,EAAcV,EAAG,SAASE,CAAI,EAAE,YAAY,EAC5CS,EAAeD,GAAeT,EAAcC,CAAI,EAClDQ,GAAeC,GACjBX,EAAG,YAAYE,CAAI,EAAE,QAASE,GAASK,EAAeP,EAAO,IAAME,CAAI,CAAC,EAG1E,IAAMQ,EAAKV,EAAK,QAAQK,EAAK,EAAE,EAAE,QAAQ,gBAAiB,EAAE,EAEtDM,EAAUX,EAAK,QAAQ,gBAAiB,EAAE,EAE1CY,EACJd,EAAG,SAASa,CAAO,EAAE,YAAY,GACjCb,EAAG,YAAYE,EAAK,QAAQ,gBAAiB,EAAE,CAAC,EAAE,KAAMa,GAC/Cf,EAAG,SAASa,EAAU,IAAME,CAAC,EAAE,YAAY,CACnD,EACC,CAACb,EAAK,SAAS,cAAc,GAAK,CAACY,GAEvC,OAAO,OAAON,EAAQ,CAAE,CAACI,GAAM,KAAME,CAAS,CAAC,CACjD,EACA,OAAAd,EAAG,YAAYO,CAAG,EAAE,QAASH,GAASK,EAAeF,EAAM,IAAMH,CAAI,CAAC,EAE/DI,CACT,EAEaQ,EAAgB,CAAC,CAC5B,UAAAC,EAAY,eACZ,YAAAC,EAAc,kBAChB,EAAyB,CAAC,IAAM,CAC9B,SAASC,GAAgB,CACvBnB,EAAG,cACDkB,EACA;AAAA;AAAA,iCAE2B,KAAK,UAAUZ,EAAUW,CAAS,EAAG,KAAM,CAAC,EAAE,QACvE,UACA,KACF;AAAA;AAAA;AAAA,CAIF,CACF,CACA,OAAAE,EAAc,EAEP,CACL,KAAM,oBACN,gBAAgBC,EAAuB,CACrCA,EAAO,QACJ,IAAI,CAACH,CAAS,CAAC,EACf,GAAG,MAAOE,CAAa,EACvB,GAAG,SAAUA,CAAa,EAC1B,GAAG,YAAaA,CAAa,CAClC,CACF,CACF","sourcesContent":["import fs from \"fs\";\nimport type { ViteDevServer } from \"vite\";\nimport { Sitemap, SitemapPluginParams } from \"./types\";\n\n// function to recursively traverse a directory and return if some of the files are named +page.svelte\nconst hasPageInside = (path: string): boolean => {\n  const files = fs.readdirSync(path);\n  if (files.some((file) => file === \"+page.svelte\")) return true;\n  return files.some((file: string) => {\n    const newPath = path + \"/\" + file;\n    if (fs.statSync(newPath).isDirectory()) {\n      return hasPageInside(newPath);\n    } else {\n      return false;\n    }\n  });\n};\n\nconst getRoutes = (dir: string): Sitemap => {\n  let routes: Sitemap = {};\n  const traverseRoutes = (path: string) => {\n    const isDirectory = fs.statSync(path).isDirectory();\n    const isPageFolder = isDirectory && hasPageInside(path);\n    if (isDirectory && isPageFolder) {\n      fs.readdirSync(path).forEach((file) => traverseRoutes(path + \"/\" + file));\n    }\n\n    const id = path.replace(dir, \"\").replace(\"/+page.svelte\", \"\");\n\n    const dirBase = path.replace(\"/+page.svelte\", \"\");\n\n    const isFolder =\n      fs.statSync(dirBase).isDirectory() &&\n      fs.readdirSync(path.replace(\"/+page.svelte\", \"\")).some((p) => {\n        return fs.statSync(dirBase + \"/\" + p).isDirectory();\n      });\n    if (!path.endsWith(\"+page.svelte\") && !isFolder) return;\n\n    Object.assign(routes, { [id || \"/\"]: isFolder });\n  };\n  fs.readdirSync(dir).forEach((file) => traverseRoutes(dir + \"/\" + file));\n\n  return routes;\n};\n\nexport const sitemapPlugin = ({\n  routesDir = \"./src/routes\",\n  sitemapFile = \"./src/sitemap.ts\"\n}: SitemapPluginParams = {}) => {\n  function updateSitemap() {\n    fs.writeFileSync(\n      sitemapFile,\n      `import type { RO_Sitemap } from 'sveltekit-sitemap';\n\nexport const sitemap = (<const>${JSON.stringify(getRoutes(routesDir), null, 3).replace(\n        /\\uFFFF/g,\n        '\\\\\"'\n      )}) satisfies RO_Sitemap\n\nexport type Sitemap = typeof sitemap\n`\n    );\n  }\n  updateSitemap();\n\n  return {\n    name: \"sveltekit-sitemap\",\n    configureServer(server: ViteDevServer) {\n      server.watcher\n        .add([routesDir])\n        .on(\"add\", updateSitemap)\n        .on(\"unlink\", updateSitemap)\n        .on(\"unlinkDir\", updateSitemap);\n    }\n  };\n};\n"]}
\ No newline at end of file
+{"version":3,"sources":["../src/plugin.ts"],"names":["fs","hasPageInside","path","files","file","newPath","getRoutes","dir","routes","traverseRoutes","isDirectory","isPageFolder","id","dirBase","isFolder","p","sitemapPlugin","routesDir","sitemapFile","updateSitemap","server"],"mappings":"4BAAA,OAAOA,MAAQ,KAKf,IAAMC,EAAiBC,GAA0B,CAC/C,IAAMC,EAAQH,EAAG,YAAYE,CAAI,EACjC,OAAIC,EAAM,KAAMC,GAASA,IAAS,cAAc,EAAU,GACnDD,EAAM,KAAMC,GAAiB,CAClC,IAAMC,EAAUH,EAAO,IAAME,EAC7B,OAAIJ,EAAG,SAASK,CAAO,EAAE,YAAY,EAC5BJ,EAAcI,CAAO,EAErB,EAEX,CAAC,CACH,EAEMC,EAAaC,GAAyB,CAC1C,IAAIC,EAAkB,CAAC,EACjBC,EAAkBP,GAAiB,CACvC,IAAMQ,EAAcV,EAAG,SAASE,CAAI,EAAE,YAAY,EAC5CS,EAAeD,GAAeT,EAAcC,CAAI,EAClDQ,GAAeC,GACjBX,EAAG,YAAYE,CAAI,EAAE,QAASE,GAASK,EAAeP,EAAO,IAAME,CAAI,CAAC,EAG1E,IAAMQ,EAAKV,EAAK,QAAQK,EAAK,EAAE,EAAE,QAAQ,gBAAiB,EAAE,EAEtDM,EAAUX,EAAK,QAAQ,gBAAiB,EAAE,EAE1CY,EACJd,EAAG,SAASa,CAAO,EAAE,YAAY,GACjCb,EAAG,YAAYE,EAAK,QAAQ,gBAAiB,EAAE,CAAC,EAAE,KAAMa,GAC/Cf,EAAG,SAASa,EAAU,IAAME,CAAC,EAAE,YAAY,CACnD,EACC,CAACb,EAAK,SAAS,cAAc,GAAK,CAACY,GAEvC,OAAO,OAAON,EAAQ,CAAE,CAACI,GAAM,GAAG,EAAGE,CAAS,CAAC,CACjD,EACA,OAAAd,EAAG,YAAYO,CAAG,EAAE,QAASH,GAASK,EAAeF,EAAM,IAAMH,CAAI,CAAC,EAE/DI,CACT,EAEaQ,EAAgB,CAAC,CAC5B,UAAAC,EAAY,eACZ,YAAAC,EAAc,kBAChB,EAAyB,CAAC,IAAM,CAC9B,SAASC,GAAgB,CACvBnB,EAAG,cACDkB,EACA;AAAA;AAAA,iCAE2B,KAAK,UAAUZ,EAAUW,CAAS,EAAG,KAAM,CAAC,EAAE,QACvE,UACA,KACF;AAAA;AAAA;AAAA,CAIF,CACF,CACA,OAAAE,EAAc,EAEP,CACL,KAAM,oBACN,gBAAgBC,EAAuB,CACrCA,EAAO,QACJ,IAAI,CAACH,CAAS,CAAC,EACf,GAAG,MAAOE,CAAa,EACvB,GAAG,SAAUA,CAAa,EAC1B,GAAG,YAAaA,CAAa,CAClC,CACF,CACF","sourcesContent":["import fs from \"fs\";\nimport type { ViteDevServer } from \"vite\";\nimport { Sitemap, SitemapPluginParams } from \"./types\";\n\n// function to recursively traverse a directory and return if some of the files are named +page.svelte\nconst hasPageInside = (path: string): boolean => {\n  const files = fs.readdirSync(path);\n  if (files.some((file) => file === \"+page.svelte\")) return true;\n  return files.some((file: string) => {\n    const newPath = path + \"/\" + file;\n    if (fs.statSync(newPath).isDirectory()) {\n      return hasPageInside(newPath);\n    } else {\n      return false;\n    }\n  });\n};\n\nconst getRoutes = (dir: string): Sitemap => {\n  let routes: Sitemap = {};\n  const traverseRoutes = (path: string) => {\n    const isDirectory = fs.statSync(path).isDirectory();\n    const isPageFolder = isDirectory && hasPageInside(path);\n    if (isDirectory && isPageFolder) {\n      fs.readdirSync(path).forEach((file) => traverseRoutes(path + \"/\" + file));\n    }\n\n    const id = path.replace(dir, \"\").replace(\"/+page.svelte\", \"\");\n\n    const dirBase = path.replace(\"/+page.svelte\", \"\");\n\n    const isFolder =\n      fs.statSync(dirBase).isDirectory() &&\n      fs.readdirSync(path.replace(\"/+page.svelte\", \"\")).some((p) => {\n        return fs.statSync(dirBase + \"/\" + p).isDirectory();\n      });\n    if (!path.endsWith(\"+page.svelte\") && !isFolder) return;\n\n    Object.assign(routes, { [id || \"/\"]: isFolder });\n  };\n  fs.readdirSync(dir).forEach((file) => traverseRoutes(dir + \"/\" + file));\n\n  return routes;\n};\n\nexport const sitemapPlugin = ({\n  routesDir = \"./src/routes\",\n  sitemapFile = \"./src/sitemap.ts\"\n}: SitemapPluginParams = {}) => {\n  function updateSitemap() {\n    fs.writeFileSync(\n      sitemapFile,\n      `import type { RO_Sitemap } from 'sveltekit-sitemap';\n\nexport const sitemap = (<const>${JSON.stringify(getRoutes(routesDir), null, 3).replace(\n        /\\uFFFF/g,\n        '\\\\\"'\n      )}) satisfies RO_Sitemap\n\nexport type Sitemap = typeof sitemap\n`\n    );\n  }\n  updateSitemap();\n\n  return {\n    name: \"sveltekit-sitemap\",\n    configureServer(server: ViteDevServer) {\n      server.watcher\n        .add([routesDir])\n        .on(\"add\", updateSitemap)\n        .on(\"unlink\", updateSitemap)\n        .on(\"unlinkDir\", updateSitemap);\n    }\n  };\n};\n"]}
\ No newline at end of file
diff --git a/dist/plugin.mjs.map b/dist/plugin.mjs.map
index a91a85d54d4a87b2a8dd97a9610cd0c6f3fbcb81..663884d5aeec318602f07b9fe0f0140e22b166cc 100644
--- a/dist/plugin.mjs.map
+++ b/dist/plugin.mjs.map
@@ -1 +1 @@
-{"version":3,"sources":["../src/plugin.ts"],"sourcesContent":["import fs from \"fs\";\nimport type { ViteDevServer } from \"vite\";\nimport { Sitemap, SitemapPluginParams } from \"./types\";\n\n// function to recursively traverse a directory and return if some of the files are named +page.svelte\nconst hasPageInside = (path: string): boolean => {\n  const files = fs.readdirSync(path);\n  if (files.some((file) => file === \"+page.svelte\")) return true;\n  return files.some((file: string) => {\n    const newPath = path + \"/\" + file;\n    if (fs.statSync(newPath).isDirectory()) {\n      return hasPageInside(newPath);\n    } else {\n      return false;\n    }\n  });\n};\n\nconst getRoutes = (dir: string): Sitemap => {\n  let routes: Sitemap = {};\n  const traverseRoutes = (path: string) => {\n    const isDirectory = fs.statSync(path).isDirectory();\n    const isPageFolder = isDirectory && hasPageInside(path);\n    if (isDirectory && isPageFolder) {\n      fs.readdirSync(path).forEach((file) => traverseRoutes(path + \"/\" + file));\n    }\n\n    const id = path.replace(dir, \"\").replace(\"/+page.svelte\", \"\");\n\n    const dirBase = path.replace(\"/+page.svelte\", \"\");\n\n    const isFolder =\n      fs.statSync(dirBase).isDirectory() &&\n      fs.readdirSync(path.replace(\"/+page.svelte\", \"\")).some((p) => {\n        return fs.statSync(dirBase + \"/\" + p).isDirectory();\n      });\n    if (!path.endsWith(\"+page.svelte\") && !isFolder) return;\n\n    Object.assign(routes, { [id || \"/\"]: isFolder });\n  };\n  fs.readdirSync(dir).forEach((file) => traverseRoutes(dir + \"/\" + file));\n\n  return routes;\n};\n\nexport const sitemapPlugin = ({\n  routesDir = \"./src/routes\",\n  sitemapFile = \"./src/sitemap.ts\"\n}: SitemapPluginParams = {}) => {\n  function updateSitemap() {\n    fs.writeFileSync(\n      sitemapFile,\n      `import type { RO_Sitemap } from 'sveltekit-sitemap';\n\nexport const sitemap = (<const>${JSON.stringify(getRoutes(routesDir), null, 3).replace(\n        /\\uFFFF/g,\n        '\\\\\"'\n      )}) satisfies RO_Sitemap\n\nexport type Sitemap = typeof sitemap\n`\n    );\n  }\n  updateSitemap();\n\n  return {\n    name: \"sveltekit-sitemap\",\n    configureServer(server: ViteDevServer) {\n      server.watcher\n        .add([routesDir])\n        .on(\"add\", updateSitemap)\n        .on(\"unlink\", updateSitemap)\n        .on(\"unlinkDir\", updateSitemap);\n    }\n  };\n};\n"],"mappings":"6BAAA,OAAOA,MAAQ,KAKf,IAAMC,EAAiBC,GAA0B,CAC/C,IAAMC,EAAQH,EAAG,YAAYE,CAAI,EACjC,OAAIC,EAAM,KAAMC,GAASA,IAAS,cAAc,EAAU,GACnDD,EAAM,KAAMC,GAAiB,CAClC,IAAMC,EAAUH,EAAO,IAAME,EAC7B,OAAIJ,EAAG,SAASK,CAAO,EAAE,YAAY,EAC5BJ,EAAcI,CAAO,EAErB,EAEX,CAAC,CACH,EAEMC,EAAaC,GAAyB,CAC1C,IAAIC,EAAkB,CAAC,EACjBC,EAAkBP,GAAiB,CACvC,IAAMQ,EAAcV,EAAG,SAASE,CAAI,EAAE,YAAY,EAC5CS,EAAeD,GAAeT,EAAcC,CAAI,EAClDQ,GAAeC,GACjBX,EAAG,YAAYE,CAAI,EAAE,QAASE,GAASK,EAAeP,EAAO,IAAME,CAAI,CAAC,EAG1E,IAAMQ,EAAKV,EAAK,QAAQK,EAAK,EAAE,EAAE,QAAQ,gBAAiB,EAAE,EAEtDM,EAAUX,EAAK,QAAQ,gBAAiB,EAAE,EAE1CY,EACJd,EAAG,SAASa,CAAO,EAAE,YAAY,GACjCb,EAAG,YAAYE,EAAK,QAAQ,gBAAiB,EAAE,CAAC,EAAE,KAAMa,GAC/Cf,EAAG,SAASa,EAAU,IAAME,CAAC,EAAE,YAAY,CACnD,EACC,CAACb,EAAK,SAAS,cAAc,GAAK,CAACY,GAEvC,OAAO,OAAON,EAAQ,CAAE,CAACI,GAAM,KAAME,CAAS,CAAC,CACjD,EACA,OAAAd,EAAG,YAAYO,CAAG,EAAE,QAASH,GAASK,EAAeF,EAAM,IAAMH,CAAI,CAAC,EAE/DI,CACT,EAEaQ,EAAgB,CAAC,CAC5B,UAAAC,EAAY,eACZ,YAAAC,EAAc,kBAChB,EAAyB,CAAC,IAAM,CAC9B,SAASC,GAAgB,CACvBnB,EAAG,cACDkB,EACA;AAAA;AAAA,iCAE2B,KAAK,UAAUZ,EAAUW,CAAS,EAAG,KAAM,CAAC,EAAE,QACvE,UACA,KACF;AAAA;AAAA;AAAA,CAIF,CACF,CACA,OAAAE,EAAc,EAEP,CACL,KAAM,oBACN,gBAAgBC,EAAuB,CACrCA,EAAO,QACJ,IAAI,CAACH,CAAS,CAAC,EACf,GAAG,MAAOE,CAAa,EACvB,GAAG,SAAUA,CAAa,EAC1B,GAAG,YAAaA,CAAa,CAClC,CACF,CACF","names":["fs","hasPageInside","path","files","file","newPath","getRoutes","dir","routes","traverseRoutes","isDirectory","isPageFolder","id","dirBase","isFolder","p","sitemapPlugin","routesDir","sitemapFile","updateSitemap","server"]}
\ No newline at end of file
+{"version":3,"sources":["../src/plugin.ts"],"sourcesContent":["import fs from \"fs\";\nimport type { ViteDevServer } from \"vite\";\nimport { Sitemap, SitemapPluginParams } from \"./types\";\n\n// function to recursively traverse a directory and return if some of the files are named +page.svelte\nconst hasPageInside = (path: string): boolean => {\n  const files = fs.readdirSync(path);\n  if (files.some((file) => file === \"+page.svelte\")) return true;\n  return files.some((file: string) => {\n    const newPath = path + \"/\" + file;\n    if (fs.statSync(newPath).isDirectory()) {\n      return hasPageInside(newPath);\n    } else {\n      return false;\n    }\n  });\n};\n\nconst getRoutes = (dir: string): Sitemap => {\n  let routes: Sitemap = {};\n  const traverseRoutes = (path: string) => {\n    const isDirectory = fs.statSync(path).isDirectory();\n    const isPageFolder = isDirectory && hasPageInside(path);\n    if (isDirectory && isPageFolder) {\n      fs.readdirSync(path).forEach((file) => traverseRoutes(path + \"/\" + file));\n    }\n\n    const id = path.replace(dir, \"\").replace(\"/+page.svelte\", \"\");\n\n    const dirBase = path.replace(\"/+page.svelte\", \"\");\n\n    const isFolder =\n      fs.statSync(dirBase).isDirectory() &&\n      fs.readdirSync(path.replace(\"/+page.svelte\", \"\")).some((p) => {\n        return fs.statSync(dirBase + \"/\" + p).isDirectory();\n      });\n    if (!path.endsWith(\"+page.svelte\") && !isFolder) return;\n\n    Object.assign(routes, { [id || \"/\"]: isFolder });\n  };\n  fs.readdirSync(dir).forEach((file) => traverseRoutes(dir + \"/\" + file));\n\n  return routes;\n};\n\nexport const sitemapPlugin = ({\n  routesDir = \"./src/routes\",\n  sitemapFile = \"./src/sitemap.ts\"\n}: SitemapPluginParams = {}) => {\n  function updateSitemap() {\n    fs.writeFileSync(\n      sitemapFile,\n      `import type { RO_Sitemap } from 'sveltekit-sitemap';\n\nexport const sitemap = (<const>${JSON.stringify(getRoutes(routesDir), null, 3).replace(\n        /\\uFFFF/g,\n        '\\\\\"'\n      )}) satisfies RO_Sitemap\n\nexport type Sitemap = typeof sitemap\n`\n    );\n  }\n  updateSitemap();\n\n  return {\n    name: \"sveltekit-sitemap\",\n    configureServer(server: ViteDevServer) {\n      server.watcher\n        .add([routesDir])\n        .on(\"add\", updateSitemap)\n        .on(\"unlink\", updateSitemap)\n        .on(\"unlinkDir\", updateSitemap);\n    }\n  };\n};\n"],"mappings":"6BAAA,OAAOA,MAAQ,KAKf,IAAMC,EAAiBC,GAA0B,CAC/C,IAAMC,EAAQH,EAAG,YAAYE,CAAI,EACjC,OAAIC,EAAM,KAAMC,GAASA,IAAS,cAAc,EAAU,GACnDD,EAAM,KAAMC,GAAiB,CAClC,IAAMC,EAAUH,EAAO,IAAME,EAC7B,OAAIJ,EAAG,SAASK,CAAO,EAAE,YAAY,EAC5BJ,EAAcI,CAAO,EAErB,EAEX,CAAC,CACH,EAEMC,EAAaC,GAAyB,CAC1C,IAAIC,EAAkB,CAAC,EACjBC,EAAkBP,GAAiB,CACvC,IAAMQ,EAAcV,EAAG,SAASE,CAAI,EAAE,YAAY,EAC5CS,EAAeD,GAAeT,EAAcC,CAAI,EAClDQ,GAAeC,GACjBX,EAAG,YAAYE,CAAI,EAAE,QAASE,GAASK,EAAeP,EAAO,IAAME,CAAI,CAAC,EAG1E,IAAMQ,EAAKV,EAAK,QAAQK,EAAK,EAAE,EAAE,QAAQ,gBAAiB,EAAE,EAEtDM,EAAUX,EAAK,QAAQ,gBAAiB,EAAE,EAE1CY,EACJd,EAAG,SAASa,CAAO,EAAE,YAAY,GACjCb,EAAG,YAAYE,EAAK,QAAQ,gBAAiB,EAAE,CAAC,EAAE,KAAMa,GAC/Cf,EAAG,SAASa,EAAU,IAAME,CAAC,EAAE,YAAY,CACnD,EACC,CAACb,EAAK,SAAS,cAAc,GAAK,CAACY,GAEvC,OAAO,OAAON,EAAQ,CAAE,CAACI,GAAM,GAAG,EAAGE,CAAS,CAAC,CACjD,EACA,OAAAd,EAAG,YAAYO,CAAG,EAAE,QAASH,GAASK,EAAeF,EAAM,IAAMH,CAAI,CAAC,EAE/DI,CACT,EAEaQ,EAAgB,CAAC,CAC5B,UAAAC,EAAY,eACZ,YAAAC,EAAc,kBAChB,EAAyB,CAAC,IAAM,CAC9B,SAASC,GAAgB,CACvBnB,EAAG,cACDkB,EACA;AAAA;AAAA,iCAE2B,KAAK,UAAUZ,EAAUW,CAAS,EAAG,KAAM,CAAC,EAAE,QACvE,UACA,KACF;AAAA;AAAA;AAAA,CAIF,CACF,CACA,OAAAE,EAAc,EAEP,CACL,KAAM,oBACN,gBAAgBC,EAAuB,CACrCA,EAAO,QACJ,IAAI,CAACH,CAAS,CAAC,EACf,GAAG,MAAOE,CAAa,EACvB,GAAG,SAAUA,CAAa,EAC1B,GAAG,YAAaA,CAAa,CAClC,CACF,CACF","names":["fs","hasPageInside","path","files","file","newPath","getRoutes","dir","routes","traverseRoutes","isDirectory","isPageFolder","id","dirBase","isFolder","p","sitemapPlugin","routesDir","sitemapFile","updateSitemap","server"]}
\ No newline at end of file
diff --git a/src/utils.ts b/src/utils.ts
index 2c263a04f11d565dfde121ca0bc705f934ab25fa..3191beedc9238bb271ebfc8a1f1078c859de52de 100644
--- a/src/utils.ts
+++ b/src/utils.ts
@@ -15,13 +15,19 @@ export const generateSitemap = <S extends RO_Sitemap, J extends boolean>(
   sitemap: S,
   toJson?: J
 ): object[] | string => {
+  const langs = ['', 'zh-HK'];
+
   // Instantiate a routes object with all the static routes
   // The will be override if you pass custom settings
   const routes: Record<string, RouteDefinition<boolean>> = Object.keys(sitemap).reduce((acc, route) => {
-    const isDynamic = route.includes("[");
+    const noLangRoute = route.replace('[[lang]]', '');
+    const isDynamic = noLangRoute.includes("[");
     if (!isDynamic && definitions[route as keyof typeof definitions] !== false) {
-      Object.assign(acc, {
-        [route]: { path: route, priority: route === "/" ? "1.0" : "0.7" } as RouteDefinition<boolean>
+      langs.forEach((lang) => {
+        const langedRoute = route.replace("/[[lang]]", lang ? `/${lang}` : '');
+        Object.assign(acc, {
+          [langedRoute]: { path: langedRoute, priority: route === "/" ? "1.0" : "0.7" } as RouteDefinition<boolean>
+        });
       });
     }
     return acc;
@@ -34,7 +40,10 @@ export const generateSitemap = <S extends RO_Sitemap, J extends boolean>(
       if (Array.isArray(RouteDefinition)) {
         RouteDefinition.forEach((definition) => {
           if (definition) {
-            Object.assign(routes, { [definition.path]: definition });
+            langs.forEach((lang) => {
+              const def = { ...definition, path: (lang ? `/${lang}` : '') + definition.path };
+              Object.assign(routes, { [(lang ? `/${lang}` : '') + def.path]: def });
+            });
           }
         });
       } else {
@@ -66,7 +75,6 @@ ${Object.entries(routes)
     const { path, priority, changeFreq, image, lastMod } = d;
     return `  <url>
     <loc>${baseUrl}${path || r}</loc>
-  </url>
   ${lastMod ? `<lastmod>${lastMod}</lastmod>` : ""}
   ${priority ? `<priority>${priority}</priority>` : ""}
   ${changeFreq ? `<changefreq>${changeFreq}</changefreq>` : ""}
@@ -79,7 +87,7 @@ ${Object.entries(routes)
       <image:caption>${encodeXML(image.altText ?? " ")}</image:caption>
     </image:image>`
       : ""
-  }`;
+  }</url>`;
   })
   .join("\n")}
 </urlset>`;
